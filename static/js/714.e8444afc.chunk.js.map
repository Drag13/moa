{"version":3,"file":"static/js/714.e8444afc.chunk.js","mappings":"wNACA,MAA6B,6B,SCsBd,SAASA,IACtB,IAAMC,GCdCC,EAAAA,EAAAA,MDcqBC,MAAK,SAACC,EAAGC,GAAC,OAAMD,EAAEE,KAAOD,EAAEC,KAAO,GAAK,CAAC,IAE9DC,GAAY,OAlBpB,SAA8BC,GAC5B,IAAMC,EAAS,IAAIC,IAWnB,OAVAF,EAAKG,SAAQ,YAAsB,IAAnBL,EAAI,EAAJA,KAAMM,EAAK,EAALA,MACdC,EAAOJ,EAAOK,IAAIR,EAAKS,eACjB,MAARF,GACFA,EAAKG,OAASJ,EACdC,EAAKI,SAAW,GAEhBR,EAAOS,IAAIZ,EAAKS,cAAe,CAAEC,MAAOJ,EAAOK,QAAS,GAE5D,IAEOR,CACT,CAK2BU,CAAqBlB,GAAMmB,WAI9CC,EAAU,CACdC,SAAU,CACR,CACEC,MAAO,QACPf,KAPSD,EAAaiB,KAAI,+BAAKC,GAAF,KAAG,aAAMA,EAAET,MAAQS,EAAER,OAAO,MAU7DS,OATanB,EAAaiB,KAAI,gBAAEG,GAAF,YAAG,UAAM,IAAIC,KAAKD,GAAGE,cAAc,KAWnE,OACE,+BACE,gBAAKC,UAAWC,EAAqB,UACnC,SAAC,KAAK,CAACvB,KAAMa,EAASW,KAAK,WAInC,CAxCAC,EAAAA,GAAAA,SAAiBC,EAAAA,GAAYC,EAAAA,EAASC,EAAAA,G","sources":["webpack://my-app/./src/stats-page/progress.module.css?9e4b","stats-page/progress.page.tsx","stats-page/progress.loader.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"chart-page\":\"progress_chart-page__OlbjC\"};","import { ArcElement, Tooltip, Legend } from \"chart.js\";\nimport { Chart as ChartJS } from \"chart.js/auto\";\nimport { Chart } from \"react-chartjs-2\";\nimport { useStatsData } from \"./progress.loader\";\nimport styles from \"./progress.module.css\";\n\nChartJS.register(ArcElement, Tooltip, Legend);\n\nfunction transformToDailyStat(data: { date: Date; score: number }[]) {\n  const result = new Map();\n  data.forEach(({ date, score }) => {\n    const stat = result.get(date.toISOString());\n    if (stat != null) {\n      stat.value += score;\n      stat.counter += 1;\n    } else {\n      result.set(date.toISOString(), { value: score, counter: 1 });\n    }\n  });\n\n  return result;\n}\n\nexport default function NewLogPage() {\n  const logs = useStatsData().sort((a, b) => (a.date > b.date ? 1 : -1));\n\n  const preparedData = [...transformToDailyStat(logs).entries()];\n  const values = preparedData.map(([_, v]) => v.value / v.counter);\n  const labels = preparedData.map(([k]) => new Date(k).toDateString());\n\n  const dataset = {\n    datasets: [\n      {\n        label: \"score\",\n        data: values,\n      },\n    ],\n    labels,\n  };\n  return (\n    <>\n      <div className={styles[\"chart-page\"]}>\n        <Chart data={dataset} type=\"bar\" />\n      </div>\n    </>\n  );\n}\n","import { useLoaderData } from \"react-router-dom\";\nimport { fetchLogs } from \"../data/fetch/log\";\nimport { mapLogsDtoToLogs } from \"../shared/services/mapper\";\nimport { LoaderData } from \"../shared/utility-types\";\n\nexport function statsLoader() {\n  return fetchLogs(mapLogsDtoToLogs);\n}\n\nexport function useStatsData() {\n  return useLoaderData() as LoaderData<typeof statsLoader>;\n}\n"],"names":["NewLogPage","logs","useLoaderData","sort","a","b","date","preparedData","data","result","Map","forEach","score","stat","get","toISOString","value","counter","set","transformToDailyStat","entries","dataset","datasets","label","map","v","labels","k","Date","toDateString","className","styles","type","ChartJS","ArcElement","Tooltip","Legend"],"sourceRoot":""}